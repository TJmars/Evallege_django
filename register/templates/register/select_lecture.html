{% extends "register/base.html" %}

{% block header %}
<style>

  section {
  max-width: 80px;
	max-height:50px;
  margin: 20px 10px auto auto;
}
  *,
*::before,
*::after {
  box-sizing: border-box;
}

$color: #e24040;

body {
  height: 100vh;
  margin: 0;
  background: #DEDEDE;
  color: #5a6674;
  font-size: 13px;
  font-family: 'Roboto', sans-serif;
  overflow: hidden;
}


/*--------------------
App
--------------------*/
.search-form {
  position: relative;
  top: 30px;
  left: 50%;
  width: 350px;
  height: 40px;
  border-radius: 40px;
  box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
  transform: translate(-50%, -50%);
  background: #f5f5f5;
  transition: all 0.3s ease;

  &.focus {
    box-shadow: 0 3px 4px rgba(0, 0, 0, 0.15);
  }
}

.search-input {
  position: absolute;
  top: 10px;
  left: 38px;
  font-size: 14px;
  background: none;
  color: #5a6674;
  width: 195px;
  height: 20px;
  border: none;
  appearance: none;
  outline: none;

  &::-webkit-search-cancel-button {
    appearance: none;
  }
}

.search-button {
  position: absolute;
  top: 10px;
  left: 15px;
  height: 20px;
  width: 20px;
  padding: 0;
  margin: 0;
  border: none;
  background: none;
  outline: none!important;
  cursor: pointer;

  & svg {
    width: 20px;
    height: 20px;
    fill: #5a6674;
  }
}

.search-option {
  position: absolute;
  text-align: right;
  top: 10px;
  right: 15px;

  div {
    position: relative;
    display: inline-block;
    margin: 0 1px;
    cursor: pointer;

    input {
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0.01;
      cursor: pointer;
    }

    span {
      position: absolute;
      display: block;
      text-align: center;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      background: #929AA3;
      color: #fff;
      font-size: 9px;
      letter-spacing: 1px;
      line-height: 1;
      text-transform: uppercase;
      padding: 4px 7px;
      border-radius: 12px;
      top: -18px;
      transition: all .2s ease-in-out;

      &::after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 50%;
        transform: translateX(-50%);
        border-top: 4px solid #929AA3;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        transition: all .2s ease-in-out;
      }
    }

    &:hover span {
      opacity: 1;
      top: -21px;
    }


    input:checked + label svg {
      fill: $color;
      opacity: .9;
    }

    input:checked + label span {
      background: $color;

      &::after {
        border-top-color: $color;
      }
    }
  }

</style>
{% endblock %}

{% block content %}

<section>
  <button type="button" style="font-size:10px;height:30px" class="btn btn-outline-secondary"
    data-toggle="modal" data-target="#exampleModalScrollable">
    一括検索
  </button>
</section>
    <div class="modal" id="exampleModalScrollable" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalScrollableLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-scrollable" role="document">
        <div class="modal-content" stle="width:40%">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalCenteredLabel">一括検索</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

              <p class="card-text">武蔵3sから講義をコピーして一括検索ができます。</p>
          		<a href="#">詳しい使い方をみる</a>


           <div class="form-group">
          	 <form class="form-inline mt-4" method="GET" action="{% url 'register:select_lecture' %}">
          		 <textarea id="textarea1" class="form-control" name="keyword2" style="width:100%;height:300px;" placeholder="コピーを貼り付け"></textarea>
           	</form>
          </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-outline-success my-2 my-sm-2" type="submit">Search</button>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<form class="search-form">
  <input class="search-input" type="text" placeholder="Search"
    aria-label="Search" name="keyword">
  <button type="submit" class="search-button">
    <i class="fas fa-search"></i>
  </button>
</form>



    {% for lecture in lecture_list %}

    <div class="card mt-4" style="position: relative;z-index: 10;">
    	<div class="card-body">
    		<h4 class="card-title">{{lecture.lecture_name}}</h4>
    		<p class="card-text">担当教員：{{lecture.teacher_name}}<br>作成日：{{lecture.created_at}}</p>
    		<div style="display:inline-flex">
    		 <div class="btn-group" role="group" aria-label="Basic example">
    				<a href="{% url 'register:detail' lecture.pk 0 %}" class="btn btn-outline-dark">
    					<i class="fas fa-chart-pie fa-lg"	></i>
    				</a>
    				<a href="{% url 'register:chat' lecture.pk %}" class="btn btn-outline-dark">
    					<i class="far fa-comment-dots fa-lg"></i>
    				</a>
    				{% if lecture not in user_lecture_eva_list %}
    				<a href="{% url 'register:evaluate' lecture.pk%}" class="btn btn-outline-dark">
    					<i class="far fa-thumbs-up fa-lg"></i>
    				</a>
    				{% endif %}
    		</div>
        <form action="{% url 'register:select_lecture' %}" method='POST'> <!-- ここを変更 -->
           {% if lecture in user_lecture_list %}
           <button class="btn btn-outline-danger ml-3" name="lecture" value="{{ lecture.id }}">
             <i class="fas fa-minus"></i>
           </button>
           {% else %}
           <button class="btn btn-outline-success ml-3" name="lecture" value="{{ lecture.id }}">
             <i class="fas fa-plus"></i>
           </button>
           {% endif %}
           {% csrf_token %}
       </form>
    </div>
    	</div>
    	</div>

    {% endfor %}


{% include 'register/page5.html' %}
<script>
  $('.search-input').focus(function(){
  $(this).parent().addClass('focus');
}).blur(function(){
  $(this).parent().removeClass('focus');
})
</script>
{% endblock %}


{% block content1 %}
<div class="row">
    <!-- 左側、ログインエリア -->
    <div class="col-md-8">

    <form class="form-inline my-2 my-lg-0" method="GET" action="{% url 'register:select_lecture' %}">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" name="keyword">
      <button class="btn btn-outline-success my-2 my-sm-2" type="submit">Search</button>
    </form>
    {% for lecture in lecture_list %}
      <div class="card">
			 <div class="card-body">
         <h4 class="card-title">{{lecture.lecture_name}}</h4>
         <p class="card-text">担当教員：{{lecture.teacher_name}}　　作成日：{{lecture.created_at}}</p>
         <div style="display:inline-flex">
					 <div class="btn-group" role="group" aria-label="Basic example">
							<a href="{% url 'register:detail' lecture.pk 0 %}" class="btn btn-outline-dark">詳細を表示</a>
							<a href="{% url 'register:chat' lecture.pk %}" class="btn btn-outline-dark">チャット</a>
							{% if lecture not in user_lecture_eva_list %}
							<a href="{% url 'register:evaluate' lecture.pk %}" class="btn btn-outline-dark">授業評価</a>
							{% endif %}
					</div>
					<form action="{% url 'register:select_lecture' %}" method='POST'> <!-- ここを変更 -->
	 					{% if lecture in user_lecture_list %}
	 					<button class="btn btn-outline-danger mx-lg-1" name="lecture" value="{{ lecture.id }}">登録解除</button>
	 					{% else %}
	 					<button class="btn btn-outline-success mx-lg-1" name="lecture" value="{{ lecture.id }}">登録</button>
	 					{% endif %}
	 					{% csrf_token %}
	 			</form>
       </div>
       </div>
      </div>
    {% endfor %}
</div>
<div class="col-md-4">
	<div class="card mt-4">
  <div class="card-header">
    <h5>一括検索</h5>
  </div>
  <div class="card-body">
    <p class="card-text">武蔵3sから講義をコピーして一括検索ができます。</p>
		<a href="#">詳しい使い方をみる</a>
  </div>
</div>

 <div class="form-group">
	 <form class="form-inline mt-4" method="GET" action="{% url 'register:select_lecture' %}">
		 <textarea id="textarea1" class="form-control" name="keyword2" style="width:100%;height:300px;" placeholder="コピーを貼り付け"></textarea>
 		<button class="btn btn-outline-success my-2 my-sm-2" type="submit">Search</button>
 	</form>
</div>
</div>
</div>
{% include 'register/page5.html' %}
{% endblock %}
